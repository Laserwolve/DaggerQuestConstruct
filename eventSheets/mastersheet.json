{
	"name": "masterSheet",
	"events": [
		{
			"eventType": "variable",
			"name": "playerClass",
			"type": "string",
			"initialValue": "chevalier",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 488057813557390
		},
		{
			"eventType": "variable",
			"name": "nextAvailableIdentifier",
			"type": "number",
			"initialValue": "1",
			"comment": "Stores the next available identifier, to be assigned to equipment",
			"isStatic": false,
			"isConstant": false,
			"sid": 232531887577943
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "maintenances",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "everything",
					"description": "all objects in the game world: the player, enemies and props",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "everything",
									"sid": 222737292507150
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "create shadows for everything that has one"
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 628579320718307,
									"parameters": {
										"object-name": "everything.ObjectTypeName & \"_shadow\"",
										"layer": "\"shadow\"",
										"x": "everything.X - 1",
										"y": "everything.Y - 1",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 326689574072024,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 502376193799494,
											"parameters": {
												"object": "shadow"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "everything",
											"sid": 413333260876326,
											"parameters": {
												"child": "shadow",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": true,
												"transform-z-elevation": false,
												"destroy-with-parent": true
											}
										},
										{
											"type": "comment",
											"text": "we can't use the alpha clamp layer effect, since we want to change the layer's opacity"
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "shadow",
											"sid": 715700397535764,
											"parameters": {
												"effect": "\"AlphaClamp\"",
												"parameter-index": "0",
												"value": "25"
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "shadow",
											"sid": 907650352477431,
											"parameters": {
												"effect": "\"AlphaClamp\"",
												"parameter-index": "1",
												"value": "0"
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "shadow",
											"sid": 279897192028576,
											"parameters": {
												"effect": "\"AlphaClamp\"",
												"parameter-index": "2",
												"value": "100"
											}
										}
									],
									"sid": 638528567706042
								}
							]
						}
					],
					"sid": 893731139821916
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "startup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "TODO: Make sure we differentiate \"start of game\" vs \"start of layout\""
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 219679762064203
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "request the project JSON files via AJAX, and set fullscreen"
								},
								{
									"id": "request-fullscreen",
									"objectClass": "browser",
									"sid": 205379913544187,
									"disabled": true,
									"parameters": {
										"mode": "stretch-scale-inner",
										"navigation-ui": "hide"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 386780259596513,
									"parameters": {
										"tag": "\"abilities\"",
										"file": "abilities.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 977870065994252,
									"parameters": {
										"tag": "\"equipment\"",
										"file": "equipment.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 572938069101415,
									"parameters": {
										"tag": "\"enemies\"",
										"file": "enemies.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 402610123438174,
									"parameters": {
										"tag": "\"maraudersMods\"",
										"file": "maraudersMods.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 994944249662297,
									"parameters": {
										"tag": "\"simple1hWeaponMods\"",
										"file": "simple1hWeaponMods.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 529236120935208,
									"parameters": {
										"tag": "\"simpleArmorMods\"",
										"file": "simpleArmorMods.json"
									}
								},
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 747563380399229,
									"parameters": {
										"tag": "\"simpleShieldMods\"",
										"file": "simpleShieldMods.json"
									}
								},
								{
									"type": "comment",
									"text": "randomly set the 'animation' (i.e. the image) of the specified props. This will give the map some originality and save us from having to set it manually."
								},
								{
									"id": "set-animation",
									"objectClass": "randomAnim",
									"sid": 667795291131046,
									"parameters": {
										"animation": "\"static\" & (floor(random(1, 17)) * 22.5) - 180",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "TODO: the player to be created is determined on the character selection screen"
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 428907846986555,
									"parameters": {
										"object-name": "player.class",
										"layer": "\"main\"",
										"x": "player.X",
										"y": "player.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"type": "comment",
									"text": "map function mods - equipment mods"
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 490352029875306,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatHealth\"",
										"function": "flatHealth"
									}
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 219208563010430,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatSlash\"",
										"function": "flatSlash"
									}
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 760879990068619,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatStab\"",
										"function": "flatStab"
									}
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 719198223579575,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatSmash\"",
										"function": "flatSmash"
									}
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 600436858791261,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatBlockChance\"",
										"function": "flatBlockChance"
									}
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 439127444345023,
									"parameters": {
										"name": "\"equipmentMods\"",
										"string": "\"flatManaRegen\"",
										"function": "flatManaRegen"
									}
								},
								{
									"type": "comment",
									"text": "map function mods - player abilities"
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 282057853911921,
									"parameters": {
										"name": "\"playerAbilities\"",
										"string": "\"heroicStrike\"",
										"function": "heroicStrike"
									}
								},
								{
									"type": "comment",
									"text": "map function mods - enemy abilities"
								},
								{
									"id": "map-function",
									"objectClass": "Functions",
									"sid": 920694598009347,
									"parameters": {
										"name": "\"enemyAbilities\"",
										"string": "\"gobloidUnderling\"",
										"function": "gobloidUnderling"
									}
								}
							],
							"sid": 133548230545780
						}
					],
					"sid": 968758602280727
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "AJAX",
					"description": "Turn JSON files into usable arrays, and generate applicable probability tables",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 688852110240318,
									"parameters": {
										"tag": "\"abilities\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "abilities",
									"sid": 865671154664879,
									"parameters": {
										"json": "AJAX.LastData"
									}
								}
							],
							"sid": 339896077654003
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 499747778393470,
									"parameters": {
										"tag": "\"enemies\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "enemies",
									"sid": 461916020282194,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 415854824375039,
									"parameters": {
										"name": "\"enemies\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 210301922739516,
									"parameters": {
										"name": "\"enemies\""
									}
								}
							],
							"sid": 894075155520832,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 703861325294232,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "enemies.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 667435950697702,
											"parameters": {
												"value": "enemies.At(0, loopindex)",
												"weight": "enemies.At(17, loopindex)"
											}
										}
									],
									"sid": 836171044086504
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 263486124809112,
									"parameters": {
										"tag": "\"equipment\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "equipment",
									"sid": 977289598811555,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 727537224030762,
									"parameters": {
										"name": "\"equipment\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 800193966954520,
									"parameters": {
										"name": "\"equipment\""
									}
								}
							],
							"sid": 607084224728433,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 884456959288145,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "equipment.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 772094639297470,
											"parameters": {
												"value": "equipment.At(0, loopindex)",
												"weight": "equipment.At(6, loopindex)"
											}
										}
									],
									"sid": 645413812068430
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 478507306227265,
									"parameters": {
										"tag": "\"maraudersMods\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "maraudersMods",
									"sid": 318619082854096,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 851965825595293,
									"parameters": {
										"name": "\"maraudersMods\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 918362949209114,
									"parameters": {
										"name": "\"maraudersMods\""
									}
								}
							],
							"sid": 955475921122971,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 341185505577674,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "maraudersMods.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 524823882068140,
											"parameters": {
												"value": "maraudersMods.At(0, loopindex)",
												"weight": "maraudersMods.At(4, loopindex)"
											}
										}
									],
									"sid": 143476302755251
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 829665600638164,
									"parameters": {
										"tag": "\"simple1hWeaponMods\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "simple1hWeaponMods",
									"sid": 650768227336895,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 199804117725769,
									"parameters": {
										"name": "\"simple1hWeaponMods\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 829472087626751,
									"parameters": {
										"name": "\"simple1hWeaponMods\""
									}
								}
							],
							"sid": 705290114318790,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 307824662773161,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "simple1hWeaponMods.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 775274138380870,
											"parameters": {
												"value": "simple1hWeaponMods.At(0, loopindex)",
												"weight": "simple1hWeaponMods.At(4, loopindex)"
											}
										}
									],
									"sid": 556588730372538
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 784001743778910,
									"parameters": {
										"tag": "\"simpleArmorMods\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "simpleArmorMods",
									"sid": 639974890565075,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 448437494089899,
									"parameters": {
										"name": "\"simpleArmorMods\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 994189647431876,
									"parameters": {
										"name": "\"simpleArmorMods\""
									}
								}
							],
							"sid": 417699951207804,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 139552229463840,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "simpleArmorMods.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 636532183166614,
											"parameters": {
												"value": "simpleArmorMods.At(0, loopindex)",
												"weight": "simpleArmorMods.At(4, loopindex)"
											}
										}
									],
									"sid": 673120668316921
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 341334052817197,
									"parameters": {
										"tag": "\"simpleShieldMods\""
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "simpleShieldMods",
									"sid": 651013175298601,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 135937559956599,
									"parameters": {
										"name": "\"simpleShieldMods\""
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 701160492714108,
									"parameters": {
										"name": "\"simpleShieldMods\""
									}
								}
							],
							"sid": 823324353394363,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 551325443233162,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "simpleShieldMods.Height - 1"
											}
										}
									],
									"actions": [
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 469640947318034,
											"parameters": {
												"value": "simpleShieldMods.At(0, loopindex)",
												"weight": "simpleShieldMods.At(4, loopindex)"
											}
										}
									],
									"sid": 130052396883841
								}
							]
						}
					],
					"sid": 900719530373834
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "data management",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "arrayLookup",
							"functionDescription": "look up a value in an array",
							"functionCategory": "data",
							"functionReturnType": "string",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "array",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 138615066068748
								},
								{
									"name": "sourceColumn",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 749816088821036
								},
								{
									"name": "valueToFind",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 918344827624248
								},
								{
									"name": "targetColumn",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 291672800255140
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 787369920357309,
									"parameters": {
										"object": "arrays",
										"expression": "arrays.ObjectTypeName",
										"comparison": 0,
										"value": "array"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "pick the array that was passed (the calling event might not pick it, so we can't use \"copy picked\")"
								}
							],
							"sid": 643674845440053,
							"children": [
								{
									"eventType": "variable",
									"name": "targetColumnNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 559595863195308
								},
								{
									"eventType": "variable",
									"name": "sourceColumnNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 959500024424395
								},
								{
									"eventType": "variable",
									"name": "returnValue",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 148176261089754
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-element",
											"objectClass": "arrays",
											"sid": 165803417552242,
											"parameters": {
												"axes": "x"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "loop through the column headers to find the columns we want"
										},
										{
											"type": "comment",
											"text": "\"stop loop\" doesn't work with the array loops. using a standard loop with arrays.width wasn't working either for some reason"
										}
									],
									"sid": 946216334824181,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-current-value",
													"objectClass": "arrays",
													"sid": 540675478633314,
													"parameters": {
														"comparison": 0,
														"value": "sourceColumn"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "this line cannot be combined into the previous line"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 870520498246570,
													"parameters": {
														"variable": "sourceColumnNumber",
														"value": "arrays.CurX"
													}
												}
											],
											"sid": 660086940294346
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-current-value",
													"objectClass": "arrays",
													"sid": 265769457322804,
													"parameters": {
														"comparison": 0,
														"value": "targetColumn"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 148872933326070,
													"parameters": {
														"variable": "targetColumnNumber",
														"value": "arrays.CurX"
													}
												}
											],
											"sid": 567741713139032
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 572601404125749,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "arrays.Height"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 628104764048334,
											"parameters": {
												"first-value": "arrays.At(sourceColumnNumber, loopindex)",
												"comparison": 0,
												"second-value": "valueToFind"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "loop through the cells of just that column to find the value we want, skipping the header row. Once we find it, set returnValue to the value of the cell located in that row but column of targetColumnNumber"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 134057885551602,
											"parameters": {
												"variable": "returnValue",
												"value": "arrays.At(targetColumnNumber, loopindex)"
											}
										}
									],
									"sid": 895434417246662,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 956672283334857,
													"parameters": {
														"first-value": "returnValue",
														"comparison": 1,
														"second-value": "\"\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "once we have a return value, stop the loop (we're not sure if setting a return value also ends the function)"
												},
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 596610162597647
												},
												{
													"id": "set-function-return-value",
													"objectClass": "Functions",
													"sid": 211056130340703,
													"parameters": {
														"value": "returnValue"
													}
												}
											],
											"sid": 721602884260980
										}
									]
								}
							]
						}
					],
					"sid": 864124535956996
				}
			],
			"sid": 999470377018381
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "isometry",
			"description": "https://www.construct.net/en/forum/construct-3/how-do-i/proper-gridless-isometry-161391",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "sortable",
							"sid": 462797486554393
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "this event needs to be above the sorting group to prevent a graphical glitch"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "sortable",
							"sid": 710280156270027,
							"parameters": {
								"instance-variable": "yValue",
								"value": "Self.ImagePointY(1)"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 399258404557076,
							"parameters": {
								"object": "sortable",
								"instance-variable": {
									"name": "yValue",
									"objectClass": "sortable"
								}
							}
						}
					],
					"sid": 692706648226430,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "subProp",
									"sid": 430266150805271,
									"parameters": {
										"child": "subProp",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "subProp",
									"sid": 108245101654544,
									"parameters": {
										"where": "in-front",
										"object": "sortable"
									}
								}
							],
							"sid": 715376688837149
						}
					]
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "defaultSorting",
					"description": "standard sorting",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "sortingMethod",
							"type": "string",
							"initialValue": "default",
							"comment": "chained \"else\" statements check various conditions to determine proper sort order",
							"isStatic": true,
							"isConstant": false,
							"sid": 597942408782996
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "chevalier_simpleSword_gear",
									"sid": 979542541266419,
									"parameters": {
										"animation": "\"idle157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 354381391477139,
									"parameters": {
										"variable": "sortingMethod",
										"value": "\"chevalier_simpleSword_idle157.5\""
									}
								}
							],
							"sid": 416573613029156
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 950593268303319
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 850045420003846,
									"parameters": {
										"value": "player.degrees",
										"lower-bound": "-67.5",
										"upper-bound": "22.5"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 567983587715567,
									"parameters": {
										"variable": "sortingMethod",
										"value": "\"chevalier_simpleSword_facingRight\""
									}
								}
							],
							"sid": 436949584769866
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 400197055614800
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 814450102607429,
									"parameters": {
										"variable": "sortingMethod",
										"value": "\"default\""
									}
								}
							],
							"sid": 423086855802810
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 646982078096699,
									"parameters": {
										"variable": "sortingMethod",
										"comparison": 0,
										"value": "\"default\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 195952686331792,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 824649383552915,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 456408598443884,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 638942562216063,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 267254234271352,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 775949046593463,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 354457868872459,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 271798418630565
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 670046878782254,
									"parameters": {
										"variable": "sortingMethod",
										"comparison": 0,
										"value": "\"chevalier_simpleSword_idle157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 566430919433616,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 948062119066712,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 968462485247892,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 254033523502773,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 807144780115159,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 427395717404114,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 693947460983246,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 679848124715355
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 254933031682079,
									"parameters": {
										"variable": "sortingMethod",
										"comparison": 0,
										"value": "\"chevalier_simpleSword_facingRight\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 706225414525156,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 100117062849016,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 883908206733303,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 728226447912402,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 754612858683346,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 843093971751952,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 279832605643722,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 527790250298130
						}
					],
					"sid": 673372497283152
				}
			],
			"sid": 208951614064183
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "generation",
					"description": "creating the player",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "body",
									"sid": 649908266541318
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "somehow the default 'head' is spawning before player's sprite's name can be referenced. this 'wait 0' fixes that."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 850311908531140,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "player",
									"sid": 689792930958837,
									"parameters": {
										"child": "body",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 991575559908630,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 724590248514879,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "these events to spawn default gear need to be nested, and I don't know why"
										},
										{
											"callFunction": "manageGear",
											"sid": 522795108903227
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 165685997638716
										}
									],
									"sid": 128728347386154,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 642546143081707,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 334948463449941,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "\"chest\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "manageGear",
													"sid": 811747585581006
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 946614535625270
												}
											],
											"sid": 939501135913347,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 871964583508159,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 206286385928841,
															"parameters": {
																"object": "slot",
																"expression": "slot.type",
																"comparison": 0,
																"value": "\"legs\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "manageGear",
															"sid": 106465882408995
														}
													],
													"sid": 532330919414885
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 390725088778286
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "facings",
					"description": "our standard degree formula. We may be able to sprinkle in 'trigger once's here for minor performance gains.",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 483224149195747,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateFacing",
									"sid": 612369400410164,
									"parameters": [
										false
									]
								}
							],
							"sid": 268561790015759
						},
						{
							"functionName": "updateFacing",
							"functionDescription": "",
							"functionCategory": "playerFunctions",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "pointTowardMouse",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 800677447669911
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "this is a function so it can be called in the middle of an ability function"
								}
							],
							"sid": 357485321288591,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "mouse-button-is-down",
											"objectClass": "mouse",
											"sid": 273147763673384,
											"parameters": {
												"mouse-button": "left"
											}
										},
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 956111477324505,
											"parameters": {
												"variable": "pointTowardMouse"
											}
										}
									],
									"actions": [],
									"sid": 566012243792849,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 245057672801818,
													"parameters": {
														"object": "invalidLocation"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 513396122365665,
													"parameters": {
														"object": "prop"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 291377249671122,
													"parameters": {
														"object": "item"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-moving-angle",
													"objectClass": "player",
													"sid": 611480276184161,
													"behaviorType": "MoveTo",
													"parameters": {
														"angle": "angle(player.X, player.Y, mouse.X, mouse.Y)"
													}
												}
											],
											"sid": 937804634403058
										}
									],
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-tick",
											"objectClass": "System",
											"sid": 951307612879823
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 339683194815129,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(player.MoveTo.MovingAngle / 22.5) * 22.5"
											}
										}
									],
									"sid": 597304771970487
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 699521252643558,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-180"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 214001403911388,
											"parameters": {
												"instance-variable": "degrees",
												"value": "180"
											}
										}
									],
									"sid": 311973330086352
								}
							]
						}
					],
					"sid": 329237326578143
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "health and mana",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 603527421887775,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if the player exists, set the orbs to the correct values and scroll them"
								},
								{
									"type": "comment",
									"text": "if the orb's height gets set before the players health and mana values are loaded, it'll divide by zero and its height will be NaN"
								},
								{
									"id": "set-height",
									"objectClass": "healthOrb",
									"sid": 976080676277972,
									"parameters": {
										"height": "clamp(player.currentHealth / player.maxHealth * 210, 0, 210)"
									}
								},
								{
									"id": "set-image-offset-y",
									"objectClass": "healthOrbScroll",
									"sid": 270752519493830,
									"parameters": {
										"offset-y": "Self.ImageOffsetY - 0.5"
									}
								},
								{
									"id": "set-height",
									"objectClass": "manaOrb",
									"sid": 366395030866464,
									"parameters": {
										"height": "clamp(player.currentMana / player.maxMana * 210, 0, 210)"
									}
								},
								{
									"id": "set-image-offset-y",
									"objectClass": "manaOrbScroll",
									"sid": 704200961615714,
									"parameters": {
										"offset-y": "Self.ImageOffsetY - 0.5"
									}
								}
							],
							"sid": 169967288874465
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 465739350097737,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "player.maxHealth"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Don't let the Player's Mana or Health exceed the maximum"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 281983026871015,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "Self.maxHealth"
									}
								}
							],
							"sid": 548314594760825
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 201028268579743,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 4,
										"value": "player.maxMana"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 300898492287615,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "Self.maxMana"
									}
								}
							],
							"sid": 344160851831815
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 479839774819735,
									"parameters": {
										"interval-seconds": "1"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 480740938664440,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "regen health and mana while not at max"
								}
							],
							"sid": 856813453440944,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 244275524588192,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 2,
												"value": "Self.maxHealth"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 587380935335697,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "Self.healthRegen"
											}
										}
									],
									"sid": 250754045410440
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 394681693639675,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 2,
												"value": "Self.maxMana"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 996169792534348,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "Self.ManaRegen"
											}
										}
									],
									"sid": 129795826900246
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 866152434480842,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 592096513750299,
									"parameters": {
										"instance-variable": "alive",
										"value": "false"
									}
								}
							],
							"sid": 897753960076491
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 238763927000217,
									"parameters": {
										"instance-variable": "alive"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 732976047570235
								}
							],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 201997854046617,
									"parameters": [
										"\"die\"",
										"10",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 918434813122711,
									"behaviorType": "MoveTo"
								}
							],
							"sid": 565195402279559
						}
					],
					"sid": 682028303768133
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "movement",
					"description": "left button is down, on pathfinding found, on moveto arrived, while moving",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 178676411066846,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [],
							"sid": 814286598707816,
							"children": [
								{
									"eventType": "variable",
									"name": "lootUID",
									"type": "number",
									"initialValue": "0",
									"comment": "the UID of the loot that was clicked on, but is out of range",
									"isStatic": true,
									"isConstant": false,
									"sid": 100696421056644
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 405646899565621,
											"parameters": {
												"object": "invalidLocation"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 385135936074090,
											"parameters": {
												"object": "item"
											},
											"isInverted": true
										},
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 930876682391198,
											"parameters": {
												"layer": "\"escapeMenu\""
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 196481541219343,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-button-released",
													"objectClass": "mouse",
													"sid": 494162049922992,
													"parameters": {
														"mouse-button": "left"
													}
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 208085592504146,
													"parameters": {
														"object": "loot"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 647357458292717,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [],
											"sid": 320252273337474,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 180367688793336,
															"parameters": {
																"first-value": "distance(player.X, player.Y, loot.X, loot.Y)",
																"comparison": 3,
																"second-value": "200"
															}
														}
													],
													"actions": [
														{
															"callFunction": "pickUpLoot",
															"sid": 155094480660526
														}
													],
													"sid": 894707140457159
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 341382646960742
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 390555706654411,
															"parameters": {
																"variable": "lootUID",
																"value": "loot.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 849589770567700,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "mouse.X",
																"y": "mouse.Y",
																"mode": "direct"
															}
														}
													],
													"sid": 924277480519900
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "mouse-button-is-down",
													"objectClass": "mouse",
													"sid": 336152681307081,
													"parameters": {
														"mouse-button": "left"
													}
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 261819972859357,
													"parameters": {
														"object": "loot"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 372563151296662,
													"parameters": {
														"object": "player"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "move-to-position",
													"objectClass": "player",
													"sid": 292436603659915,
													"behaviorType": "MoveTo",
													"parameters": {
														"x": "mouse.X",
														"y": "mouse.Y",
														"mode": "direct"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 659908527582961,
													"parameters": {
														"variable": "lootUID",
														"value": "0"
													}
												}
											],
											"sid": 793998442532164
										}
									]
								},
								{
									"eventType": "comment",
									"text": "this unfortunately runs every tick but the alternatives were causing issues"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "player",
											"sid": 547008140146597,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if they're moving, set their animation appropriately"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 675024527106087,
											"parameters": [
												"\"walk\"",
												"10",
												"\"playFromCurrentFrame\""
											]
										}
									],
									"sid": 578475438044595
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-arrived",
											"objectClass": "player",
											"sid": 906796874359426,
											"behaviorType": "MoveTo"
										},
										{
											"id": "on-hit-solid",
											"objectClass": "player",
											"sid": 343736913322444,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if they're moving, set their animation appropriately"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 391612568947562,
											"parameters": [
												"\"idle\"",
												"10",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 264245307584727,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 795242137368175,
													"parameters": {
														"object": "loot",
														"expression": "loot.UID",
														"comparison": 0,
														"value": "lootUID"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 175798870320191,
													"parameters": {
														"first-value": "distance(player.X, player.Y, loot.X, loot.Y)",
														"comparison": 3,
														"second-value": "200"
													}
												}
											],
											"actions": [
												{
													"callFunction": "pickUpLoot",
													"sid": 308915366370374
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 814933590702323,
													"parameters": {
														"variable": "lootUID",
														"value": "0"
													}
												}
											],
											"sid": 589937029097099
										}
									],
									"isOrBlock": true
								}
							]
						}
					],
					"sid": 638152604065361
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "abilities",
					"description": "trigger ability on keypress",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 945765804553531,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [],
							"sid": 880202207404642,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 790878519489681,
											"parameters": {
												"key": 81
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 840544837783640,
											"parameters": {
												"object": "skillSlot",
												"expression": "skillSlot.abilityType = \"specialA\" & skillSlot.abilityNumber = 1"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 616794774985479,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "skillSlot.ability",
												"forward-params": "0"
											}
										}
									],
									"sid": 139018981652091
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 348288599114096,
											"parameters": {
												"key": 87
											}
										}
									],
									"actions": [],
									"sid": 891508183552074
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 824898098059110,
											"parameters": {
												"key": 69
											}
										}
									],
									"actions": [],
									"sid": 274883335139920
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 482654637066171,
											"parameters": {
												"key": 82
											}
										}
									],
									"actions": [],
									"sid": 755032955753249
								}
							]
						}
					],
					"sid": 997195893481392
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "animations",
					"description": "on any animation finished, function updateAnimations",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "body",
									"sid": 277154892593527,
									"parameters": {
										"child": "shadow",
										"which": "all"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "body",
									"sid": 562954243135948,
									"parameters": {
										"child": "gear",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "gear",
									"sid": 531508577503215,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "shadow",
									"sid": 608530557713012,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "gear",
									"sid": 810080572356341,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "shadow",
									"sid": 391375761861555,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								}
							],
							"sid": 680601154411291
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-frame-changed",
									"objectClass": "body",
									"sid": 626266243418257
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "https://github.com/Laserwolve/DaggerQuest/issues/23\nhttps://github.com/Scirra/Construct-3-bugs/issues/5895"
								},
								{
									"type": "comment",
									"text": "To completely get rid of the incorrect height and width values, we need to have this run every tick, however, there's no actual different outcome"
								},
								{
									"id": "set-scale",
									"objectClass": "body",
									"sid": 251113314637112,
									"parameters": {
										"scale": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "gear",
									"sid": 879978514337925,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 817016835494938
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "body",
									"sid": 307320171177811
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 820387014694633,
									"parameters": {
										"value": "find(body.AnimationName, \"die\") = -1\n"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "body",
									"sid": 694679925896904,
									"parameters": {
										"animation": "\"idle\" & player.degrees",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "when any animation that's not \"die\" finishes, play the idle animation. 'MoveTo is moving - playing walking animation' overrides this."
								}
							],
							"sid": 249723197085170
						},
						{
							"functionName": "updateAnimations",
							"functionDescription": "change the player's animations",
							"functionCategory": "playerFunctions",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "which animation to play",
									"sid": 308447533896746
								},
								{
									"name": "animationSpeed",
									"type": "number",
									"initialValue": "10",
									"comment": "how fast the animation plays",
									"sid": 938843169588506
								},
								{
									"name": "startPoint",
									"type": "string",
									"initialValue": "playFromBeginning",
									"comment": "",
									"sid": 930634823243599
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "startPoint is a string because it needs to get passed from an ability"
								}
							],
							"sid": 876919120712379,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 820419287349249,
											"parameters": {
												"variable": "startPoint",
												"comparison": 0,
												"value": "\"playFromBeginning\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "branching trees, based on the start point, and if the player is armed or not"
										}
									],
									"sid": 643696095664731,
									"children": [
										{
											"eventType": "comment",
											"text": "the parenthesis are important to separate the ORs and the ANDs"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 454777570762780,
													"parameters": {
														"object": "slot",
														"expression": "(slot.type = \"mainHand\" & slot.identifier <> 0) | (slot.type = \"offHand\" & slot.identifier <> 0)"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 178048038646848,
													"parameters": {
														"animation": "animationName & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 382152598039924
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 414487715194878
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 843310174601244,
													"parameters": {
														"animation": "animationName & \"Unarmed\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 828584722377837
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 523055351333349
										}
									],
									"actions": [],
									"sid": 147281652454510,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 923797470622227,
													"parameters": {
														"object": "slot",
														"expression": "(slot.type = \"mainHand\" & slot.identifier <> 0) | (slot.type = \"offHand\" & slot.identifier <> 0)"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 388449806984843,
													"parameters": {
														"animation": "animationName & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 271009907825758
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 115023380498590
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 658637088303921,
													"parameters": {
														"animation": "animationName & \"Unarmed\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 232293402341510
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "this has to be done after the animation is set, so it goes in a blank event, instead of repeating it"
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 490387401801182,
											"parameters": {
												"speed": "animationSpeed"
											}
										}
									],
									"sid": 404211335169201
								}
							]
						}
					],
					"sid": 639787439213546
				}
			],
			"sid": 360972873398840
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "menus",
			"description": "open and close menus on key press",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "abilityBar",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 104784766906725,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 429918200819385,
									"parameters": {
										"object": "skillSlot"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "skillSlot",
									"sid": 213857550350786,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 744772867742757,
									"parameters": {
										"value": "skillSlot.abilityNumber <> 0 | skillSlot.optionNumber <> 0\n"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when left click is released over a skill slot..."
								}
							],
							"sid": 494678894964776,
							"children": [
								{
									"eventType": "variable",
									"name": "abilityCache",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 633511476997020
								},
								{
									"eventType": "variable",
									"name": "abilityTypeCache",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 423471993546483
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "skillSlot",
											"sid": 769301536152788,
											"parameters": {
												"instance-variable": "abilityType",
												"comparison": 1,
												"value": "\"\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "skillSlot",
											"sid": 354057767263879,
											"parameters": {
												"instance-variable": "optionNumber",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...and it's an ability skill slot, open the ability selector and record which ability was clicked on"
										},
										{
											"callFunction": "openMenu",
											"sid": 336548535053868,
											"parameters": [
												"\"abilitySelector\""
											]
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 429426909962745,
											"parameters": {
												"variable": "abilityTypeCache",
												"value": "skillSlot.abilityType"
											}
										}
									],
									"sid": 973309646676730,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 171782983763078,
													"parameters": {
														"object": "skillSlot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 778453747379759,
													"parameters": {
														"object": "skillSlot",
														"expression": "skillSlot.optionNumber",
														"comparison": 1,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "then set the options icons accordingly, after clearing them"
												},
												{
													"id": "set-animation",
													"objectClass": "skillSlot",
													"sid": 736950082796595,
													"parameters": {
														"animation": "\"none\"",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "skillSlot",
													"sid": 539927134792939,
													"parameters": {
														"animation": "Functions.arrayLookup(abilities.ObjectTypeName, \"locationData\", body.ObjectTypeName & \"_\" & abilityTypeCache & \"_\" & skillSlot.optionNumber, \"simpleName\")",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "skillSlot",
													"sid": 887555124587905,
													"parameters": {
														"instance-variable": "abilityType",
														"value": "abilityTypeCache"
													}
												}
											],
											"sid": 252682003570461
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "skillSlot",
											"sid": 601088753722318,
											"parameters": {
												"instance-variable": "optionNumber",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if it's an option skill slot, record its skill and type"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 812042078838700,
											"parameters": {
												"variable": "abilityCache",
												"value": "skillSlot.AnimationName"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 466823333195203,
											"parameters": {
												"variable": "abilityTypeCache",
												"value": "skillSlot.abilityType"
											}
										},
										{
											"callFunction": "closeMenu",
											"sid": 421726466959861,
											"parameters": [
												"\"abilitySelector\""
											]
										}
									],
									"sid": 231127850365458,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 901694592720370,
													"parameters": {
														"object": "skillSlot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 202362652003991,
													"parameters": {
														"object": "skillSlot",
														"expression": "skillSlot.abilityNumber",
														"comparison": 1,
														"value": "0"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 819701422064207,
													"parameters": {
														"object": "skillSlot",
														"expression": "skillSlot.abilityType",
														"comparison": 0,
														"value": "abilityTypeCache"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "skillSlot",
													"sid": 787982802684086,
													"parameters": {
														"animation": "abilityCache",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "skillSlot",
													"sid": 842214032457943,
													"parameters": {
														"instance-variable": "ability",
														"value": "abilityCache"
													}
												}
											],
											"sid": 187719820704532
										}
									]
								}
							]
						}
					],
					"sid": 185611791428997
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "glow effects",
					"description": "glow on mouse over",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 455813199767936,
									"parameters": {
										"object": "clickableText"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 427211722312213
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "clickableText",
									"sid": 749535483039434,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "clickableText",
									"sid": 890139466053213,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowVertical\""
									}
								}
							],
							"sid": 977729139120749
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 113672055945879,
									"parameters": {
										"object": "clickableText"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 473238161902293
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "clickableText",
									"sid": 792869755106434,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "clickableText",
									"sid": 470683146882596,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowVertical\""
									}
								}
							],
							"sid": 203500301539045
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 978183502458428,
									"parameters": {
										"object": "checkbox"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 280483440043528
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "checkbox",
									"sid": 267534140795214,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "checkbox",
									"sid": 487497407305707,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowVertical\""
									}
								}
							],
							"sid": 885710116644427
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 352400451636034,
									"parameters": {
										"object": "checkbox"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 751199554417960
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "checkbox",
									"sid": 738036734149925,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "checkbox",
									"sid": 453580994405491,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowVertical\""
									}
								}
							],
							"sid": 151135615581236
						}
					],
					"sid": 523898705226362
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "menu interactions",
					"description": "clickable text and checkboxes",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 234498259373858,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 301556477787471,
									"parameters": {
										"object": "clickableText"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "do something based on which text/link we clicked on"
								}
							],
							"sid": 904295768484862,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "clickableText",
											"sid": 199147032202967,
											"parameters": {
												"text-to-compare": "\"resume\"",
												"case-sensitivity": "ignore-case"
											}
										}
									],
									"actions": [
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 899085378387434,
											"parameters": {
												"time-scale": "1"
											}
										},
										{
											"type": "comment",
											"text": "this wait prevents us from walking to where the 'resume' button is"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 993567926461696,
											"parameters": {
												"seconds": ".1"
											}
										},
										{
											"callFunction": "closeMenu",
											"sid": 716684675488068,
											"parameters": [
												"\"escapeMenu\""
											]
										}
									],
									"sid": 917146792238475
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "clickableText",
											"sid": 973392554304600,
											"parameters": {
												"text-to-compare": "\"settings\"",
												"case-sensitivity": "ignore-case"
											}
										}
									],
									"actions": [
										{
											"callFunction": "openMenu",
											"sid": 590070897291454,
											"parameters": [
												"\"settingsMenu\""
											]
										},
										{
											"callFunction": "closeMenu",
											"sid": 369402091801142,
											"parameters": [
												"\"escapeMenu\""
											]
										}
									],
									"sid": 730089319275824
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "clickableText",
											"sid": 418604221198427,
											"parameters": {
												"text-to-compare": "\"quit\"",
												"case-sensitivity": "ignore-case"
											}
										}
									],
									"actions": [
										{
											"id": "close",
											"objectClass": "browser",
											"sid": 369984653469212
										}
									],
									"sid": 791169731827488
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "clickableText",
											"sid": 115158014633327,
											"parameters": {
												"text-to-compare": "\"back\"",
												"case-sensitivity": "ignore-case"
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeMenu",
											"sid": 843271824723070,
											"parameters": [
												"\"settingsMenu\""
											]
										},
										{
											"callFunction": "openMenu",
											"sid": 678990547080277,
											"parameters": [
												"\"escapeMenu\""
											]
										}
									],
									"sid": 851085901228674
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 314076869972591,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "checkbox"
									}
								}
							],
							"actions": [
								{
									"id": "toggle-boolean-instvar",
									"objectClass": "checkbox",
									"sid": 289672907718914,
									"parameters": {
										"instance-variable": "checked"
									}
								}
							],
							"sid": 369244040738813,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "checkbox",
											"sid": 515357012290737,
											"parameters": {
												"instance-variable": "checked"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "checkbox",
											"sid": 396990508790245,
											"parameters": {
												"animation": "\"checked\"",
												"from": "beginning"
											}
										}
									],
									"sid": 314477655340640
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 595018321603377
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "checkbox",
											"sid": 301268125526770,
											"parameters": {
												"animation": "\"unchecked\"",
												"from": "beginning"
											}
										}
									],
									"sid": 936519268426258
								}
							]
						}
					],
					"sid": 509294605247214
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "tooltip",
					"description": "cursor is over item, cursor is not over item",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "updateItemTooltip",
							"functionDescription": "",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "tooltipName",
									"sid": 403922031563211,
									"parameters": {
										"text": "item.fullName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipSubtitle",
									"sid": 416649017697086,
									"parameters": {
										"text": "item.classRestrictions"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLevel",
									"sid": 545992828307981,
									"parameters": {
										"text": "\"Level \" & item.level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLore",
									"sid": 418586466663026,
									"parameters": {
										"text": "item.lore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipText",
									"sid": 165114513030333,
									"parameters": {
										"text": "\"\""
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 560668761206172,
									"parameters": {
										"layer": "\"tooltip\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 839282314975790,
							"children": [
								{
									"eventType": "variable",
									"name": "mod",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 427246477776721
								},
								{
									"eventType": "variable",
									"name": "modName",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 703831407336945
								},
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 777541703028668
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 506298701842864,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(item.mods, newline) - 2"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 667582364437711,
											"parameters": {
												"variable": "mod",
												"value": "tokenat(item.mods, loopindex, newline)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 586851539564636,
											"parameters": {
												"variable": "modName",
												"value": "tokenat(mod, 0, \",\")"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 546653477153128,
											"parameters": {
												"variable": "value",
												"value": "tokenat(mod, 1, \",\")"
											}
										}
									],
									"sid": 409440496129538,
									"children": [
										{
											"eventType": "variable",
											"name": "description",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 835988990348992
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 310113803380862,
													"parameters": {
														"object": "arrays",
														"expression": "arrays.ObjectTypeName",
														"comparison": 0,
														"value": "item.modTable & \"Mods\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 965565881318284,
													"parameters": {
														"variable": "description",
														"value": "Functions.arrayLookup(arrays.ObjectTypeName, \"simpleName\", modName, \"description\")"
													}
												},
												{
													"id": "append-text",
													"objectClass": "tooltipText",
													"sid": 942644679389255,
													"parameters": {
														"text": "replace(description, \"#\", str(value)) & newline"
													}
												}
											],
											"sid": 265581356252234
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 383660506194741,
											"parameters": {
												"value": "find(item.classRestrictions, body.ObjectTypeName) <> -1 | findCase(item.classRestrictions, \"All Classes\") <> - 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipSubtitle",
											"sid": 944660338052024,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 393700823780635,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 471165848654188
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "tooltipSubtitle",
											"sid": 554009285220658,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 151411071491171
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 885162307659794,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "item.level"
											}
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 278076140284243,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 154344554105522
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 414015544389042
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 444963098108851,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 396662177227274
								}
							]
						},
						{
							"functionName": "updateLootTooltip",
							"functionDescription": "",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "lootTooltipName",
									"sid": 770833290207584,
									"parameters": {
										"text": "loot.fullName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "lootTooltipName",
									"sid": 717663654349690,
									"parameters": {
										"text": "loot.fullName"
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 472701217132613,
									"parameters": {
										"layer": "\"lootTooltip\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 267586614472365
						},
						{
							"eventType": "comment",
							"text": "moving the cursor from one item or loot to another in the same tick would result in an incorrect tooltip showing up. Making the tooltip process a function that's called by these events resolves that issue."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 107297597116228,
									"parameters": {
										"object": "item"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 330765907151888
								}
							],
							"actions": [
								{
									"callFunction": "updateItemTooltip",
									"sid": 332233769030672
								}
							],
							"sid": 238682198203668
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 922579668115231,
									"parameters": {
										"object": "item"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 536823644581580,
									"parameters": {
										"first-value": "item.fullName",
										"comparison": 1,
										"second-value": "tooltipName.Text"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 312605419994214
								}
							],
							"actions": [
								{
									"callFunction": "updateItemTooltip",
									"sid": 698714760381393
								}
							],
							"sid": 268392704139115
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 112177132936094,
									"parameters": {
										"object": "item"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 745835663867434
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 647758917926830,
									"parameters": {
										"layer": "\"tooltip\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 297514698047954
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 297785865747340,
									"parameters": {
										"object": "loot"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "loot",
									"sid": 698404012890938,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 320346255766173
								}
							],
							"actions": [
								{
									"callFunction": "updateLootTooltip",
									"sid": 116036846580854
								}
							],
							"sid": 197121999716712
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 665476328685496,
									"parameters": {
										"object": "loot"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "loot",
									"sid": 343791059494884,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 296784855754477,
									"parameters": {
										"first-value": "loot.fullName",
										"comparison": 1,
										"second-value": "lootTooltipName.Text"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 742141083589859
								}
							],
							"actions": [
								{
									"callFunction": "updateLootTooltip",
									"sid": 946812829164447
								}
							],
							"sid": 396883644760038
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 705007248647931,
									"parameters": {
										"object": "loot"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 449316618941005
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 805734048522118,
									"parameters": {
										"layer": "\"lootTooltip\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 646964137142686
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 421045264796362,
									"parameters": {
										"layer": "\"tooltip\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "while the tooltip is being displayed..."
								}
							],
							"sid": 147440516727507,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 917332559940411,
											"parameters": {
												"first-value": "mouse.X(\"tooltip\")",
												"comparison": 4,
												"second-value": "ViewportRight(\"tooltip\") - 512"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...check if there's not enough space to the right of the mouse to fit the tooltip..."
										}
									],
									"sid": 171415470225089,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 518454152886869,
													"parameters": {
														"first-value": "mouse.Y(\"tooltip\")",
														"comparison": 4,
														"second-value": "ViewportBottom(\"tooltip\") - 256"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and not enough space below the mouse either. move the tooltip up and to the left"
												},
												{
													"id": "set-position",
													"objectClass": "tooltipBackground",
													"sid": 771254181200496,
													"parameters": {
														"x": "mouse.X(\"tooltip\") - 512",
														"y": "mouse.Y(\"tooltip\") - 256"
													}
												}
											],
											"sid": 415999400992389
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 583759953776657
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...just move it to the left"
												},
												{
													"id": "set-position",
													"objectClass": "tooltipBackground",
													"sid": 650810913198200,
													"parameters": {
														"x": "mouse.X(\"tooltip\") - 512",
														"y": "mouse.Y(\"tooltip\")"
													}
												}
											],
											"sid": 878391678194441
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 205098183622432
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 230294208208948,
											"parameters": {
												"first-value": "mouse.Y(\"tooltip\")",
												"comparison": 4,
												"second-value": "ViewportBottom(\"tooltip\") - 256"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if there's enough space to the left but not below, offset it upwards only"
										},
										{
											"id": "set-position",
											"objectClass": "tooltipBackground",
											"sid": 464182390558474,
											"parameters": {
												"x": "mouse.X(\"tooltip\")",
												"y": "mouse.Y(\"tooltip\") -256"
											}
										}
									],
									"sid": 729964592458539
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 460252571110274
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's in an OK spot just show the tooltip like normal"
										},
										{
											"id": "set-position",
											"objectClass": "tooltipBackground",
											"sid": 951386457745326,
											"parameters": {
												"x": "mouse.X(\"tooltip\")",
												"y": "mouse.Y(\"tooltip\")"
											}
										}
									],
									"sid": 168298489188907
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 298359287090398,
									"parameters": {
										"layer": "\"lootTooltip\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "while the tooltip is being displayed..."
								},
								{
									"id": "set-size",
									"objectClass": "lootTooltipBackground",
									"sid": 967303334166730,
									"parameters": {
										"width": "lootTooltipName.TextWidth + 5",
										"height": "lootTooltipName.TextHeight + 5"
									}
								}
							],
							"sid": 197510833670997,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 420042199626887,
											"parameters": {
												"first-value": "mouse.X(\"lootTooltip\")",
												"comparison": 4,
												"second-value": "ViewportRight(\"lootTooltip\") - lootTooltipName.Width"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...check if there's not enough space to the right of the mouse to fit the tooltip..."
										}
									],
									"sid": 386988080399932,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 312262787512600,
													"parameters": {
														"first-value": "mouse.Y(\"lootTooltip\")",
														"comparison": 4,
														"second-value": "ViewportBottom(\"lootTooltip\") - lootTooltipName.Height"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and not enough space below the mouse either. move the tooltip up and to the left"
												},
												{
													"id": "set-position",
													"objectClass": "lootTooltipName",
													"sid": 544719104407926,
													"parameters": {
														"x": "mouse.X(\"lootTooltip\") - lootTooltipName.Width",
														"y": "mouse.Y(\"lootTooltip\") - lootTooltipName.Height"
													}
												}
											],
											"sid": 968956376148753
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 292642557538036
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...just move it to the left"
												},
												{
													"id": "set-position",
													"objectClass": "lootTooltipName",
													"sid": 990805209399887,
													"parameters": {
														"x": "mouse.X(\"lootTooltip\") - lootTooltipName.Width",
														"y": "mouse.Y(\"lootTooltip\")"
													}
												}
											],
											"sid": 548377178001851
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 630010611918263
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 571002508535630,
											"parameters": {
												"first-value": "mouse.Y(\"lootTooltip\")",
												"comparison": 4,
												"second-value": "ViewportBottom(\"lootTooltip\") - lootTooltipName.Height"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if there's enough space to the left but not below, offset it upwards only"
										},
										{
											"id": "set-position",
											"objectClass": "lootTooltipName",
											"sid": 647467566208205,
											"parameters": {
												"x": "mouse.X(\"lootTooltip\")",
												"y": "mouse.Y(\"lootTooltip\") - lootTooltipName.Height"
											}
										}
									],
									"sid": 904736395125848
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 823935633435039
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's in an OK spot just show the tooltip like normal"
										},
										{
											"id": "set-position",
											"objectClass": "lootTooltipName",
											"sid": 325816638994192,
											"parameters": {
												"x": "mouse.X(\"lootTooltip\")",
												"y": "mouse.Y(\"lootTooltip\")"
											}
										}
									],
									"sid": 170297516511487
								}
							]
						}
					],
					"sid": 717675702069212
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 397096927138702,
							"parameters": {
								"layer": "\"escapeMenu\""
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 711555805275638,
							"parameters": {
								"layer": "\"settingsMenu\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "you can only open game menus when the game isn't paused"
						}
					],
					"sid": 997206599796515,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 101084878499898,
									"parameters": {
										"key": 67
									}
								}
							],
							"actions": [],
							"sid": 272058241344676,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 535667588666046,
											"parameters": {
												"layer": "\"characterMenu\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeMenu",
											"sid": 144280034077409,
											"parameters": [
												"\"characterMenu\""
											]
										}
									],
									"sid": 512612149788567
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 599839510046478
										}
									],
									"actions": [
										{
											"callFunction": "openMenu",
											"sid": 295274486564341,
											"parameters": [
												"\"characterMenu\""
											]
										}
									],
									"sid": 940098026990363
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 689009393698044,
									"parameters": {
										"key": 73
									}
								}
							],
							"actions": [],
							"sid": 852140877873188,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 223461026898046,
											"parameters": {
												"layer": "\"inventoryMenu\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeMenu",
											"sid": 986310461782508,
											"parameters": [
												"\"inventoryMenu\""
											]
										}
									],
									"sid": 973614120953908
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 318751608638113
										}
									],
									"actions": [
										{
											"callFunction": "openMenu",
											"sid": 873322069763492,
											"parameters": [
												"\"inventoryMenu\""
											]
										}
									],
									"sid": 918619777654508
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 358224905917478,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [
								{
									"callFunction": "openMenu",
									"sid": 466041690029032,
									"parameters": [
										"\"escapeMenu\""
									]
								},
								{
									"callFunction": "closeMenu",
									"sid": 490188807631167,
									"parameters": [
										"\"characterMenu\""
									]
								},
								{
									"callFunction": "closeMenu",
									"sid": 643224573689607,
									"parameters": [
										"\"inventoryMenu\""
									]
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 896423764496299,
									"parameters": {
										"time-scale": "0"
									}
								}
							],
							"sid": 717065864552136
						}
					]
				},
				{
					"functionName": "openMenu",
					"functionDescription": "Open the specified menu",
					"functionCategory": "menus",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "menuName",
							"type": "string",
							"initialValue": "",
							"comment": "The name of the menu to open",
							"sid": 228302164093831
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 549054421592022,
							"parameters": {
								"layer": "menuName",
								"interactive": true
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 815229529394354,
							"parameters": {
								"layer": "menuName",
								"visibility": "visible"
							}
						}
					],
					"sid": 611587644063602
				},
				{
					"functionName": "closeMenu",
					"functionDescription": "Close the specified menu",
					"functionCategory": "menus",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "menuName",
							"type": "string",
							"initialValue": "",
							"comment": "The name of the menu to close",
							"sid": 231291736061001
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 869394294821857,
							"parameters": {
								"layer": "menuName",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 498576737166859,
							"parameters": {
								"layer": "menuName",
								"visibility": "invisible"
							}
						}
					],
					"sid": 195906611329587
				}
			],
			"sid": 438623016775981
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "equipment",
			"description": "the monolith itself",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "swapID",
					"type": "number",
					"initialValue": "0",
					"comment": "the identifier of the equipped item, so we can swap it",
					"isStatic": true,
					"isConstant": false,
					"sid": 460083663828293
				},
				{
					"eventType": "variable",
					"name": "swapSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the original slot in a swap",
					"isStatic": true,
					"isConstant": false,
					"sid": 514842658771285
				},
				{
					"eventType": "variable",
					"name": "draggedOriginSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot the drag originated from",
					"isStatic": true,
					"isConstant": false,
					"sid": 733109451777230
				},
				{
					"eventType": "variable",
					"name": "dragCacheItemUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the item we're dragging",
					"isStatic": true,
					"isConstant": false,
					"sid": 441136248969188
				},
				{
					"eventType": "variable",
					"name": "gearToSpawn",
					"type": "string",
					"initialValue": "",
					"comment": "the expression of the gear to spawn",
					"isStatic": true,
					"isConstant": false,
					"sid": 458425609476851
				},
				{
					"eventType": "variable",
					"name": "dragCacheSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot we dropped on",
					"isStatic": true,
					"isConstant": false,
					"sid": 419990859565051
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "loot management",
					"description": "on enemy destroyed, on left click on loot, setItemVariables function",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 157815173001094,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "spawn loot: set the drop table {based on the drop table of the chest opened or the enemy slain}, spawn the equipment loot {at the location of the chest or dead enemy}"
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 708567762167456,
									"parameters": {
										"name": "\"equipment\""
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 763188451335308,
									"parameters": {
										"object-name": "advancedRandom.Weighted & \"_loot\"",
										"layer": "\"background\"",
										"x": "body.X",
										"y": "body.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 845480987322492,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 815229494407313,
											"parameters": {
												"object": "loot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "assign stats to the loot based on the total of its base numbers {and random modifiers}. Give it a identifier, and then increment the next available identifier"
										},
										{
											"id": "set-animation",
											"objectClass": "loot",
											"sid": 324467039403301,
											"parameters": {
												"animation": "\"loot\" & (floor(random(1, 17)) * 22.5) - 180",
												"from": "beginning"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 919150050158033,
											"parameters": {
												"instance-variable": "identifier",
												"value": "nextAvailableIdentifier"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 958963336852288,
											"parameters": {
												"variable": "nextAvailableIdentifier",
												"value": "1"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 762552918306863,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "tokenat(loot.ObjectTypeName, 0, \"_\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 518837714069851,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 966626737683308,
											"parameters": {
												"instance-variable": "type",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 125055487831430,
											"parameters": {
												"instance-variable": "lore",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"lore\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 926103908584952,
											"parameters": {
												"instance-variable": "level",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"level\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 859639079810747,
											"parameters": {
												"instance-variable": "classRestrictions",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"classRestrictions\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 670145039262085,
											"parameters": {
												"instance-variable": "modTable",
												"value": "Functions.arrayLookup(equipment.ObjectTypeName, \"simpleName\", Self.simpleName, \"modTable\")"
											}
										},
										{
											"id": "setProbabilityTable",
											"objectClass": "advancedRandom",
											"sid": 108513580733481,
											"parameters": {
												"name": "loot.modTable & \"Mods\""
											}
										}
									],
									"sid": 332446098382247,
									"children": [
										{
											"eventType": "variable",
											"name": "mod",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 644516573214278
										},
										{
											"eventType": "variable",
											"name": "lowerBound",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 705214669074041
										},
										{
											"eventType": "variable",
											"name": "upperBound",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 688449932913114
										},
										{
											"eventType": "variable",
											"name": "value",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 528844236158785
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 316765329503032,
													"parameters": {
														"count": "round(random(1,6))"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 512393997071753,
													"parameters": {
														"variable": "mod",
														"value": "advancedRandom.Weighted"
													}
												}
											],
											"sid": 858163988062600,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 339755436772530,
															"parameters": {
																"object": "arrays",
																"expression": "arrays.ObjectTypeName",
																"comparison": 0,
																"value": "loot.modTable & \"Mods\""
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 767353220847685,
															"parameters": {
																"variable": "lowerBound",
																"value": "Functions.arrayLookup(arrays.ObjectTypeName, \"simpleName\", mod, \"lowerBound\")"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 202386549632524,
															"parameters": {
																"variable": "upperBound",
																"value": "Functions.arrayLookup(arrays.ObjectTypeName, \"simpleName\", mod, \"upperBound\")"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 170115562586653,
															"parameters": {
																"variable": "value",
																"value": "round(random(lowerBound,upperBound))"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 479509263466344,
															"parameters": {
																"instance-variable": "mods",
																"value": "Self.mods & mod & \",\" & value & newline"
															}
														}
													],
													"sid": 415358382647967
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "pickUpLoot",
							"functionDescription": "Picking up loot and turning it into an item",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 393981461411063,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 455286951028909,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 740007317795992,
											"parameters": {
												"object": "normalText",
												"expression": "normalText.Text",
												"comparison": 0,
												"value": "\"auto equip\""
											}
										},
										{
											"id": "pick-children",
											"objectClass": "normalText",
											"sid": 472715164821169,
											"parameters": {
												"child": "checkbox",
												"which": "own"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "checkbox",
											"sid": 321995072745779,
											"parameters": {
												"instance-variable": "checked"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 743811212713656,
											"parameters": {
												"value": "find(loot.classRestrictions, player.class) <> -1 | findCase(loot.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 733734111573752,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "item.level"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 666577917486947,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "loot.type"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 244366897965237,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is enabled, and the player's class matches the loot's restrictions, pick the first empty slot matching the loot's type, and spawn the item there"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 675797068124128,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"characterMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"callFunction": "setItemVariables",
											"sid": 716828568262539
										},
										{
											"type": "comment",
											"text": "we need to wait 0 seconds for the item to actually be created, so we can reference it in \"manageGear\""
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 677194288664096,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"callFunction": "manageGear",
											"sid": 631853285148376
										}
									],
									"sid": 555516425017955,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 176492017542500,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "manageMods",
													"sid": 306758232156540,
													"parameters": [
														"\"activate\""
													]
												}
											],
											"sid": 103818237289596
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 539148480088477
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 395237506380756,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"none\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 315317389332300,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 520346102824365,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is disabled, or there's no empty slots matching the item's type, spawn the item in the first empty inventory slot."
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 992914636479028,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"inventoryMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"callFunction": "setItemVariables",
											"sid": 333768097502940
										}
									],
									"sid": 255806085749852
								}
							]
						},
						{
							"functionName": "setItemVariables",
							"functionDescription": "set the variables on an item, from its loot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 133677250390557,
									"parameters": {
										"object": "item"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 311576968958397,
									"parameters": {
										"instance-variable": "identifier",
										"value": "loot.identifier"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 159416928086356,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "loot.simpleName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 933185506318726,
									"parameters": {
										"instance-variable": "fullName",
										"value": "loot.fullName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 623293713382274,
									"parameters": {
										"instance-variable": "type",
										"value": "loot.type"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 487258195458950,
									"parameters": {
										"instance-variable": "lore",
										"value": "loot.lore"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 255719131757116,
									"parameters": {
										"instance-variable": "level",
										"value": "loot.level"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 602723344857007,
									"parameters": {
										"instance-variable": "mods",
										"value": "loot.mods"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 816475893339835,
									"parameters": {
										"instance-variable": "classRestrictions",
										"value": "loot.classRestrictions"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 908527752428442,
									"parameters": {
										"instance-variable": "modTable",
										"value": "loot.modTable"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 544586890392282,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 308885092235469,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "destroy",
									"objectClass": "loot",
									"sid": 146374128936517
								}
							],
							"sid": 933594587434508,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 855796392084468,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 963574022666636,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 472323779758638
								}
							]
						}
					],
					"sid": 272026618127214
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "item management",
					"description": "on right click on item, on item drag start, on item drop, function attachItem, function detachItem",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 907450374639054,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked",
										"object-clicked": "item"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if an item is right clicked"
								},
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 239721338443623,
									"behaviorType": "MoveTo"
								}
							],
							"sid": 456258694374295,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 503390835885460,
											"parameters": {
												"layer": "\"characterMenu\""
											}
										},
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 278561949015100,
											"parameters": {
												"layer": "\"inventoryMenu\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 835527845015025,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "item.identifier"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "and both the inventory and character menus are open, pick the slot the item is in"
										}
									],
									"sid": 321102395598627,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 478464087724246,
													"parameters": {
														"first-value": "slot.type",
														"comparison": 0,
														"second-value": "item.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the item is in the character menu"
												}
											],
											"sid": 281304387175559,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 359673801492044,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-evaluate",
															"objectClass": "System",
															"sid": 540110165524338,
															"parameters": {
																"object": "slot",
																"expression": "slot.type = \"none\" & slot.identifier = 0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "check to see if there's any empty inventory slots the item can go into"
														}
													],
													"sid": 550680239476313,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 117199755222953,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 700463708227201,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if there are, detach the item from its current slot"
																},
																{
																	"callFunction": "detachItem",
																	"sid": 654228811975068
																},
																{
																	"callFunction": "manageGear",
																	"sid": 375632344582155
																},
																{
																	"callFunction": "manageMods",
																	"sid": 686280278520119,
																	"parameters": [
																		"\"deactivate\""
																	]
																}
															],
															"sid": 712183801189808,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 505200645459958,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-evaluate",
																			"objectClass": "System",
																			"sid": 403277694292811,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type = \"none\" & slot.identifier = 0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 237726797208608,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "then attach it to the first empty inventory slot"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 545157740367289
																		}
																	],
																	"sid": 127014785944924
																}
															]
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 920737898768442
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 101907525873764,
													"parameters": {
														"first-value": "slot.type",
														"comparison": 0,
														"second-value": "\"none\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 821438112571935,
													"parameters": {
														"value": "find(item.classRestrictions, player.class) <> -1 | findCase(item.classRestrictions, \"All Classes\") <> - 1"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 683515743054657,
													"parameters": {
														"first-value": "player.level",
														"comparison": 5,
														"second-value": "item.level"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the item is in the inventory menu, and doesn't have class restrictions"
												}
											],
											"sid": 608758609849116,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 562092271751723,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 418516925843507,
															"parameters": {
																"object": "slot",
																"expression": "slot.type",
																"comparison": 0,
																"value": "item.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "pick the slots that match the item's type"
														}
													],
													"sid": 220426366639772,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 940655629970340,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "of those slots, check if any are empty"
																}
															],
															"sid": 979626581507262,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 417544230189415,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 365656757136814,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.identifier",
																				"comparison": 0,
																				"value": "item.identifier"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "now that we know there's an empty character slot for this item, go back to the slot holding our item, and detach"
																		},
																		{
																			"callFunction": "detachItem",
																			"sid": 209989045985367
																		}
																	],
																	"sid": 510232840401003,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 687891204440242,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-evaluate",
																					"objectClass": "System",
																					"sid": 494556660467115,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.type = item.type & slot.identifier = 0"
																					}
																				},
																				{
																					"id": "pick-nth-instance",
																					"objectClass": "System",
																					"sid": 518448236328085,
																					"parameters": {
																						"object": "slot",
																						"instance": "0"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "re-pick the first empty character slot that matches the item's type, and attach to it"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 249740170953740
																				},
																				{
																					"callFunction": "manageGear",
																					"sid": 821436435833939
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 957999099560255,
																					"parameters": [
																						"\"activate\""
																					]
																				}
																			],
																			"sid": 581848473729716
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 473328099617465
																},
																{
																	"id": "pick-nth-instance",
																	"objectClass": "System",
																	"sid": 452112677036010,
																	"parameters": {
																		"object": "slot",
																		"instance": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if no slots are empty, start the *swap*: pick the first slot and store its identifier, which is also the identifier of the item in it"
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 594298961971407,
																	"parameters": {
																		"variable": "swapID",
																		"value": "slot.identifier"
																	}
																}
															],
															"sid": 900521080628855,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 954441923627097,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 797247748975945,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.identifier",
																				"comparison": 0,
																				"value": "item.identifier"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "go back to the slot holding our item, and detach. save this slots UID so we know where to put the other item"
																		},
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 554377269604826,
																			"parameters": {
																				"variable": "swapSlotUID",
																				"value": "slot.UID"
																			}
																		},
																		{
																			"type": "comment",
																			"text": "for some reason this isn't a function and I'm too scared to change it to one"
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "slot",
																			"sid": 234439482800968,
																			"parameters": {
																				"instance-variable": "identifier",
																				"value": "0"
																			}
																		},
																		{
																			"id": "remove-from-parent",
																			"objectClass": "item",
																			"sid": 421350180860841
																		}
																	],
																	"sid": 505181530159418,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 350193540843062,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 960337999778045,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.type",
																						"comparison": 0,
																						"value": "item.type"
																					}
																				},
																				{
																					"id": "pick-nth-instance",
																					"objectClass": "System",
																					"sid": 533914012481586,
																					"parameters": {
																						"object": "slot",
																						"instance": "0"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "re-pick the first character slot that matches the item's type, and attach to it, even though it has an different item in it"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 979764236686308
																				},
																				{
																					"callFunction": "manageGear",
																					"sid": 609473883932633
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 234005824637698,
																					"parameters": [
																						"\"activate\""
																					]
																				}
																			],
																			"sid": 774141939405747,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "pick-all",
																							"objectClass": "System",
																							"sid": 354923434159943,
																							"parameters": {
																								"object": "item"
																							}
																						},
																						{
																							"id": "pick-by-comparison",
																							"objectClass": "System",
																							"sid": 775606819858384,
																							"parameters": {
																								"object": "item",
																								"expression": "item.identifier",
																								"comparison": 0,
																								"value": "swapID"
																							}
																						},
																						{
																							"id": "pick-all",
																							"objectClass": "System",
																							"sid": 959071523890785,
																							"parameters": {
																								"object": "slot"
																							}
																						},
																						{
																							"id": "pick-by-comparison",
																							"objectClass": "System",
																							"sid": 931495074959062,
																							"parameters": {
																								"object": "slot",
																								"expression": "slot.UID",
																								"comparison": 0,
																								"value": "swapSlotUID"
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "now we have both items in the same slot. we'll detach the item that shouldn't be there, picking it with swapID. We don't need to clear the identifier value because it was already set correctly in the previous event"
																						},
																						{
																							"id": "remove-from-parent",
																							"objectClass": "item",
																							"sid": 640146890488163
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 403521908433952,
																							"parameters": [
																								"\"deactivate\""
																							]
																						},
																						{
																							"type": "comment",
																							"text": "it'll go where the other item left, which we have saved in previousLocationUID"
																						},
																						{
																							"callFunction": "attachItem",
																							"sid": 525306323931253
																						}
																					],
																					"sid": 677488698158509
																				}
																			]
																		}
																	]
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "item",
									"sid": 234607378453951,
									"behaviorType": "DragDrop"
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 349816476984252,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when an item starts being dragged, record where it came from, set dragging to true, detach it, and move it to the overlay layer"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 754993433249121,
									"parameters": {
										"variable": "draggedOriginSlotUID",
										"value": "slot.UID"
									}
								},
								{
									"callFunction": "detachItem",
									"sid": 302007787793827
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 254433474025264,
									"parameters": {
										"layer": "\"overlay\""
									}
								}
							],
							"sid": 428400646180546,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 318400644125493,
											"parameters": {
												"first-value": "slot.type",
												"comparison": 1,
												"second-value": "\"none\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear appropriately"
										},
										{
											"callFunction": "manageGear",
											"sid": 226328968634940
										},
										{
											"callFunction": "manageMods",
											"sid": 850428069551543,
											"parameters": [
												"\"deactivate\""
											]
										}
									],
									"sid": 284724620508033
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drop",
									"objectClass": "item",
									"sid": 185064968792646,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when we drop the item, set dragging to false"
								}
							],
							"sid": 368606240345904,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 239410685570115,
											"parameters": {
												"object": "slot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over a slot"
										}
									],
									"sid": 909215645552379,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 311356589526831,
													"parameters": {
														"value": "slot.type <> item.type & slot.type <> \"none\" "
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 706467197851096,
													"parameters": {
														"value": "(find(item.classRestrictions, player.ObjectTypeName) = -1 & slot.type <> \"none\") | (findCase(item.classRestrictions, \"All Classes\") = - 1 & slot.type <> \"none\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and the item can't go into that slot, because of the wrong slot or wrong class"
												}
											],
											"sid": 486561303104366,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 662699248092907,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 603773595347177,
															"parameters": {
																"object": "slot",
																"expression": "slot.UID",
																"comparison": 0,
																"value": "draggedOriginSlotUID"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "send the item back to the slot it came from"
														},
														{
															"callFunction": "attachItem",
															"sid": 807423590708243
														}
													],
													"sid": 372084800430909,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 706982562637186,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "manageGear",
																	"sid": 356351048950646
																},
																{
																	"callFunction": "manageMods",
																	"sid": 461784403816772,
																	"parameters": [
																		"\"activate\""
																	]
																}
															],
															"sid": 492350390689536
														}
													]
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 173825426818409
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and that slot was a character slot that matches the item's type, or is \"none\""
												}
											],
											"sid": 235323517149223,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 706940862432328,
															"parameters": {
																"first-value": "slot.identifier",
																"comparison": 0,
																"second-value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is empty, attach the item to it"
														},
														{
															"callFunction": "attachItem",
															"sid": 755517994463810
														}
													],
													"sid": 302132729186494,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 913053895388541,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "manageGear",
																	"sid": 261651388725610
																},
																{
																	"callFunction": "manageMods",
																	"sid": 242430348133737,
																	"parameters": [
																		"\"activate\""
																	]
																}
															],
															"sid": 227993766212505
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 684508394239238
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is not empty, save its identifier (which is also its item's identifier) so we can overwrite it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 320070819273328,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 790957739571903,
															"parameters": {
																"variable": "dragCacheItemUID",
																"value": "item.UID"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 133412072333063,
															"parameters": {
																"variable": "dragCacheSlotUID",
																"value": "slot.UID"
															}
														}
													],
													"sid": 926704137882279,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 856253865650833,
																	"parameters": {
																		"object": "item"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 607217173764064,
																	"parameters": {
																		"object": "item",
																		"expression": "item.identifier",
																		"comparison": 0,
																		"value": "swapID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 556370785871209,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 814993824317951,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 889749088420609,
																	"parameters": {
																		"value": "slot.type = item.type | slot.type = \"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "check if the item can go back to the origin slot"
																}
															],
															"sid": 446214430038489,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 430198706199228,
																			"parameters": {
																				"object": "item"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 786600436762681,
																			"parameters": {
																				"object": "item",
																				"expression": "item.UID",
																				"comparison": 0,
																				"value": "dragCacheItemUID"
																			}
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 884143383958506,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 847719581391421,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.UID",
																				"comparison": 0,
																				"value": "dragCacheSlotUID"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it can, re-pick the item being dragged, and the slot we dropped it on, and attach them"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 730147247110423
																		}
																	],
																	"sid": 317689921110482,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-two-values",
																					"objectClass": "System",
																					"sid": 997925109649739,
																					"parameters": {
																						"first-value": "slot.type",
																						"comparison": 1,
																						"second-value": "\"none\""
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "if it came from a character slot, manage the gear and mods appropriately"
																				},
																				{
																					"callFunction": "manageGear",
																					"sid": 136376916577856
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 458183003927685,
																					"parameters": [
																						"\"activate\""
																					]
																				}
																			],
																			"sid": 691736139834671
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 533765828446150,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 680629949909678,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 927592210142433,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 691773285560317,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "draggedOriginSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now pick and detach the overlapped item that shouldn't be there (but the slot's identifier is OK), and pick the origin slot, and attach the two"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 166580103873408
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 767502108924439,
																					"parameters": [
																						"\"deactivate\""
																					]
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 779030019274525
																				}
																			],
																			"sid": 719791495969264,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "compare-two-values",
																							"objectClass": "System",
																							"sid": 478103024756550,
																							"parameters": {
																								"first-value": "slot.type",
																								"comparison": 1,
																								"second-value": "\"none\""
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "if it came from a character slot, manage the gear and mods appropriately"
																						},
																						{
																							"callFunction": "manageGear",
																							"sid": 533648329503679
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 571076454593055,
																							"parameters": [
																								"\"activate\""
																							]
																						}
																					],
																					"sid": 885550467639247
																				}
																			]
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 159959225219816
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 134566865336910,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 356242290957192,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it can't, don't swap, and send the item being dragged back to the origin slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 720061667497873
																}
															],
															"sid": 396572528051228,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 256272947098751,
																			"parameters": {
																				"first-value": "slot.type",
																				"comparison": 1,
																				"second-value": "\"none\""
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it came from a character slot, manage the gear and mods appropriately"
																		},
																		{
																			"callFunction": "manageGear",
																			"sid": 632450950545019
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 151673920187354,
																			"parameters": [
																				"\"activate\""
																			]
																		}
																	],
																	"sid": 797467982882335
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 455081811968270
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 303195277849558,
											"parameters": {
												"object": "invalidLocation"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 336180665831004,
											"parameters": {
												"object": "slot",
												"expression": "slot.UID",
												"comparison": 0,
												"value": "draggedOriginSlotUID"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over an invalid location, send the item back to the slot it came from"
										},
										{
											"callFunction": "attachItem",
											"sid": 233896099711252
										}
									],
									"sid": 928807145139509,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 555698547526039,
													"parameters": {
														"first-value": "slot.type",
														"comparison": 1,
														"second-value": "\"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it came from a character slot, manage the gear and mods appropriately"
												},
												{
													"callFunction": "manageGear",
													"sid": 326371934937896
												},
												{
													"callFunction": "manageMods",
													"sid": 497067758023897,
													"parameters": [
														"\"activate\""
													]
												}
											],
											"sid": 335077123042393
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 965644803821028
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 282980121268730,
											"parameters": {
												"object": "background"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over the game world background, spawn its loot"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 887257321825201,
											"parameters": {
												"object-name": "item.simpleName & \"_loot\"",
												"layer": "\"background\"",
												"x": "mouse.X",
												"y": "mouse.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 802557677035560,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 725243271643880,
													"parameters": {
														"object": "loot"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "transfer data from item to loot, then destroy the item"
												},
												{
													"id": "set-animation",
													"objectClass": "loot",
													"sid": 212537803317576,
													"parameters": {
														"animation": "\"loot\" & (floor(random(1, 17)) * 22.5) - 180",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 434250609062887,
													"parameters": {
														"instance-variable": "identifier",
														"value": "item.identifier"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 393404642449188,
													"parameters": {
														"instance-variable": "simpleName",
														"value": "item.simpleName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 369765376845682,
													"parameters": {
														"instance-variable": "fullName",
														"value": "item.fullName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 358872857757884,
													"parameters": {
														"instance-variable": "type",
														"value": "item.type"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 147187451179442,
													"parameters": {
														"instance-variable": "lore",
														"value": "item.lore"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 576727100729668,
													"parameters": {
														"instance-variable": "level",
														"value": "item.level"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 945362626177063,
													"parameters": {
														"instance-variable": "mods",
														"value": "item.mods"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 620559500850159,
													"parameters": {
														"instance-variable": "classRestrictions",
														"value": "item.classRestrictions"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 392335914199442,
													"parameters": {
														"instance-variable": "modTable",
														"value": "item.modTable"
													}
												},
												{
													"id": "destroy",
													"objectClass": "item",
													"sid": 180831869794982
												}
											],
											"sid": 153787272485741
										}
									]
								}
							]
						},
						{
							"functionName": "attachItem",
							"functionDescription": "attaches an item to a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "item",
									"sid": 886874741300218,
									"parameters": {
										"x": "slot.X",
										"y": "slot.Y"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 976364820381199,
									"parameters": {
										"layer": "slot.LayerName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 917796503948986,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 189329140661720,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 407160735655194,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 578471366626085,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 447166101655296,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 604894461782609
								}
							]
						},
						{
							"functionName": "detachItem",
							"functionDescription": "detaches an item from a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 176900121771998,
									"parameters": {
										"instance-variable": "identifier",
										"value": "0"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "item",
									"sid": 369710643468274
								}
							],
							"sid": 144230717048555,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 780666354099962,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 698167467943761,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 374981958236728
								}
							]
						}
					],
					"sid": 272842255428856
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "gear management",
					"description": "function manageGear, on image loading complete, function destroyGear, function setGearVariables",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "setGearVariables",
							"functionDescription": "give a gear the correct type and z order values after it spawns",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 314103303076242,
									"parameters": {
										"object": "gear"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 353258703348754,
									"parameters": {
										"object": "gear",
										"expression": "gear.ObjectTypeName",
										"comparison": 0,
										"value": "gearToSpawn"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "\"pick last created object\" doesn't work, so pick the gear by its name"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "gear",
									"sid": 162895696066676,
									"parameters": {
										"instance-variable": "type",
										"value": "slot.type"
									}
								}
							],
							"sid": 178571082857556
						},
						{
							"functionName": "manageGear",
							"functionDescription": "handle the spawning and destroying of gear",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": true,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 436779068685679,
									"parameters": {
										"value": "slot.type <> \"neck\" | slot.type <> \"ring\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "WARNING: the order in which things process gets very tricky with triggers, functions and wait 0s. Edit with care!"
								},
								{
									"type": "comment",
									"text": "as long as the slot's type is not neck or ring..."
								}
							],
							"sid": 417940933125247,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 396177719509411,
											"parameters": {
												"first-value": "slot.identifier",
												"comparison": 0,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's empty..."
										}
									],
									"sid": 131187605688921,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 462230958397402,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "slot.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "pick the gear that correlates with the slot's type"
												}
											],
											"sid": 560614276768535,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 279722741984562,
															"parameters": {
																"value": "slot.type = \"mainHand\" | slot.type = \"offHand\" | slot.type = \"feet\" | slot.type = \"hands\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it's mainHand, offHand, feet, or hands (the slots that have visual representation but no default gear), just destroy the relevant gear"
														},
														{
															"callFunction": "destroyGear",
															"sid": 386408363590753
														}
													],
													"sid": 674401262295294,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 683151268728839,
																	"parameters": {
																		"value": "slot.type = \"mainHand\" | slot.type = \"offHand\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it was a mainHand or offHand, we'll need to update animations to not play armed animations"
																},
																{
																	"callFunction": "updateAnimations",
																	"sid": 487260822832313,
																	"parameters": [
																		"\"idle\"",
																		"10",
																		"\"playFromBeginning\""
																	]
																}
															],
															"sid": 444005246368836
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 543485265969739
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 906369911155457,
															"parameters": {
																"value": "slot.type = \"chest\" | slot.type = \"legs\" | slot.type = \"head\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it's chest, legs, or head (the slots with visual representation that have default gear), load the default gear"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 652362415769596,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
															}
														},
														{
															"id": "load-object-images-by-name",
															"objectClass": "System",
															"sid": 975471320673806,
															"parameters": {
																"object": "gearToSpawn"
															}
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 230224240095935
														},
														{
															"callFunction": "destroyGear",
															"sid": 505547267995634
														},
														{
															"callFunction": "setGearVariables",
															"sid": 268943788148057
														}
													],
													"sid": 758160739102646
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 297776102701441
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if there's no gear, that means the game has just started, and we just need to spawn default gear"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 925628940038026,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
													}
												},
												{
													"id": "load-object-images-by-name",
													"objectClass": "System",
													"sid": 665899626004441,
													"parameters": {
														"object": "gearToSpawn"
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 205669274469034
												},
												{
													"callFunction": "setGearVariables",
													"sid": 314203124818856
												}
											],
											"sid": 204607140843567
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 181405199859484
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's not empty..."
										}
									],
									"sid": 860060670772633,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 317626044295364,
													"parameters": {
														"object": "item",
														"expression": "item.identifier",
														"comparison": 0,
														"value": "slot.identifier"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "pick the item that's currently in that slot"
												}
											],
											"sid": 458550768341112,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 167138644446239,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "slot.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "pick the gear that correlates with the slot's type (there might not be one)"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 240636428425626,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
															}
														},
														{
															"id": "load-object-images-by-name",
															"objectClass": "System",
															"sid": 947060350034642,
															"parameters": {
																"object": "gearToSpawn"
															}
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 262541228648614
														},
														{
															"callFunction": "destroyGear",
															"sid": 433990533759034
														},
														{
															"callFunction": "setGearVariables",
															"sid": 622845315730067
														}
													],
													"sid": 871771565225334
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 615901837972289
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if there wasn't any gear for that slot already, we can just spawn the new one easy peasy — THE MUSTARD SEED"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 334751967885620,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
															}
														},
														{
															"id": "load-object-images-by-name",
															"objectClass": "System",
															"sid": 513316240944504,
															"parameters": {
																"object": "gearToSpawn"
															}
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 592665773120701
														},
														{
															"callFunction": "setGearVariables",
															"sid": 827202483134881
														}
													],
													"sid": 126625812876943
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-image-loading-complete",
									"objectClass": "System",
									"sid": 207680736042354
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "these 3 events HAVE to be in an \"on image loading complete\" event to prevent the gear from flashing its default animation on load"
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 977684083026391,
									"parameters": {
										"object-name": "gearToSpawn",
										"layer": "\"main\"",
										"x": "body.X",
										"y": "body.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 553200782012642,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"callFunction": "updateAnimations",
									"sid": 511153457642306,
									"parameters": [
										"\"idle\"",
										"10",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 863051405156812
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "gear",
									"sid": 789436849995584
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when gear is created, add it as a child to the player to keep it always in the same place"
								},
								{
									"id": "add-child",
									"objectClass": "body",
									"sid": 861171136675957,
									"parameters": {
										"child": "gear",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": true,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 576374765299822
						},
						{
							"functionName": "destroyGear",
							"functionDescription": "destroy gear, and unload it from memory",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "gear",
									"sid": 866049113189356
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 470753431024888,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"id": "unload-object-images",
									"objectClass": "System",
									"sid": 958541594623482,
									"parameters": {
										"object": "gear"
									}
								}
							],
							"sid": 888560517237341
						}
					],
					"sid": 325931434451077
				}
			],
			"sid": 601245444566729
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy generation",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 262319548284187
								},
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 442529270510984,
									"parameters": {
										"count": "random(2,4)"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 999324413163087,
									"parameters": {
										"object-to-create": "enemy",
										"layer": "\"mechanics\"",
										"x": "5922 + random(-100, 100)",
										"y": "7484 + random(-100, 100)",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 578521946003753,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 494396749078109,
											"parameters": {
												"object": "enemy"
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 968357070377208,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "setProbabilityTable",
											"objectClass": "advancedRandom",
											"sid": 868833817350981,
											"disabled": true,
											"parameters": {
												"name": "\"enemies\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 918956743552570,
											"disabled": true,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "advancedRandom.Weighted"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 462295834258966,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "\"gobloidUnderling\""
											}
										},
										{
											"id": "set-width",
											"objectClass": "enemy",
											"sid": 581822472437489,
											"parameters": {
												"width": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"size\"))"
											}
										},
										{
											"id": "set-height",
											"objectClass": "enemy",
											"sid": 353427491377342,
											"parameters": {
												"height": "Self.Width"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 845065748588571,
											"parameters": {
												"instance-variable": "arcaneDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"arcaneDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 174442265386217,
											"parameters": {
												"instance-variable": "attackSpeed",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"attackSpeed\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 825938420261421,
											"parameters": {
												"instance-variable": "characterMods",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"characterMods\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 884440248156448,
											"parameters": {
												"instance-variable": "coldDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"coldDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 635146483557108,
											"parameters": {
												"instance-variable": "corruptDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"corruptDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 808827675117127,
											"parameters": {
												"instance-variable": "fireDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"fireDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 209113445876343,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 490498114339711,
											"parameters": {
												"instance-variable": "health",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"health\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 473595641400468,
											"parameters": {
												"instance-variable": "lightningDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"lightningDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 507056550995796,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"slashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 358110528007955,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"smashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 941433583471586,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"stabDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 721281048794332,
											"parameters": {
												"instance-variable": "type",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"type\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 568830325240026,
											"parameters": {
												"instance-variable": "attackRange",
												"value": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"attackRange\"))"
											}
										},
										{
											"id": "set-max-speed",
											"objectClass": "enemy",
											"sid": 158611887908841,
											"behaviorType": "MoveTo",
											"parameters": {
												"max-speed": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"movementSpeed\"))"
											}
										},
										{
											"id": "set-range",
											"objectClass": "enemy",
											"sid": 904597949659371,
											"behaviorType": "LineOfSight",
											"parameters": {
												"range": "int(Functions.arrayLookup(\"enemies\",\"simpleName\", Self.simpleName, \"sightRange\"))"
											}
										},
										{
											"id": "add-obstacle",
											"objectClass": "enemy",
											"sid": 401051289210605,
											"behaviorType": "LineOfSight",
											"parameters": {
												"obstacle": "prop"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "enemy",
											"sid": 168851847286209,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "random(2, 4)",
												"type": "regular",
												"tag": "\"idle\""
											}
										},
										{
											"type": "comment",
											"text": "set a random facing on spawn, and spawn the enemy's body"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 917661980693292,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "random(-180, 180)"
											}
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 355039717820814,
											"parameters": {
												"object-name": "enemy.simpleName",
												"layer": "\"main\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 531489532420119,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 489148716613563,
													"parameters": {
														"object": "enemyBody"
													}
												}
											],
											"actions": [
												{
													"id": "add-child",
													"objectClass": "enemy",
													"sid": 193006821412785,
													"parameters": {
														"child": "enemyBody",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-z-elevation": false,
														"destroy-with-parent": true
													}
												}
											],
											"sid": 568661094238507
										}
									]
								}
							]
						}
					],
					"sid": 934843324786867
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemy",
									"sid": 330346351311274
								}
							],
							"actions": [],
							"sid": 535964514175137,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 747927871800522,
											"parameters": {
												"instance-variable": "health",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 495674729500203,
											"parameters": {
												"instance-variable": "alive",
												"value": "false"
											}
										}
									],
									"sid": 287309572114379
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 121591201288334,
											"parameters": {
												"instance-variable": "alive"
											}
										}
									],
									"actions": [],
									"sid": 962559651820205,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-moving",
													"objectClass": "enemy",
													"sid": 574323310773474,
													"behaviorType": "MoveTo"
												},
												{
													"id": "pick-children",
													"objectClass": "enemy",
													"sid": 430653884790412,
													"parameters": {
														"child": "enemyBody",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "enemyBody",
													"sid": 654665686053878,
													"parameters": {
														"animation": "\"walk\" & enemy.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 974862513062633
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "has-los-to-object",
													"objectClass": "enemy",
													"sid": 474692211889864,
													"behaviorType": "LineOfSight",
													"parameters": {
														"object": "player",
														"image-point": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if they have line of sight, they may or may not also be in range"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 784759503744947,
													"parameters": {
														"instance-variable": "alerted",
														"value": "true"
													}
												}
											],
											"sid": 209856504349155,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 659597866822513,
															"parameters": {
																"object": "enemy",
																"expression": "distance(enemy.X, enemy.Y, player.X, player.Y)",
																"comparison": 3,
																"value": "enemy.attackRange"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "enemy",
															"sid": 595602860829599,
															"parameters": {
																"instance-variable": "inRange",
																"value": "true"
															}
														}
													],
													"sid": 745043361893384
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 566958387758097,
													"parameters": {
														"object": "enemy",
														"expression": "distance(enemy.X, enemy.Y, player.X, player.Y)",
														"comparison": 4,
														"value": "enemy.attackRange"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if they're not in range, they may or may not have line of sight"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 959601817549373,
													"parameters": {
														"instance-variable": "inRange",
														"value": "false"
													}
												}
											],
											"sid": 671059136543965,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "has-los-to-object",
															"objectClass": "enemy",
															"sid": 153143837609504,
															"behaviorType": "LineOfSight",
															"parameters": {
																"object": "player",
																"image-point": "0"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "enemy",
															"sid": 566535689192764,
															"parameters": {
																"instance-variable": "alerted",
																"value": "false"
															}
														}
													],
													"sid": 539797597590782
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 151983275842956,
													"parameters": {
														"object": "enemy"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "enemy",
													"sid": 978718228742509,
													"parameters": {
														"which": "bottom"
													}
												}
											],
											"actions": [
												{
													"id": "push-out-solid",
													"objectClass": "enemy",
													"sid": 885862857553011,
													"behaviorType": "Custom",
													"parameters": {
														"direction": "nearest"
													}
												}
											],
											"sid": 902789578472791
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 889017135616730,
													"parameters": {
														"instance-variable": "alerted"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 475699721151371,
													"parameters": {
														"instance-variable": "attacking"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 415869992805947,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / 22.5) * 22.5"
													}
												}
											],
											"sid": 741381162689212,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "enemy",
															"sid": 901989310783096,
															"parameters": {
																"instance-variable": "inRange"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the player isn't in range, walk to a random location inside the player"
														},
														{
															"id": "move-to-position",
															"objectClass": "enemy",
															"sid": 993577312042290,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "player.X + random(player.Width * -1, player.Width)",
																"y": "player.Y + random(player.Width * -1, player.Width)",
																"mode": "direct"
															}
														}
													],
													"sid": 236101123603923
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "enemy",
															"sid": 655827835507618,
															"parameters": {
																"instance-variable": "inRange"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the player is in range..."
														},
														{
															"id": "call-mapped-function",
															"objectClass": "Functions",
															"sid": 620995252110612,
															"parameters": {
																"name": "\"enemyAbilities\"",
																"string": "enemy.simpleName",
																"forward-params": "0"
															}
														}
													],
													"sid": 885621592278733
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 713300454461208,
													"parameters": {
														"instance-variable": "alerted"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 812469589293615,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(Self.MoveTo.MovingAngle / 22.5) * 22.5"
													}
												}
											],
											"sid": 727179496053531,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "on-timer",
															"objectClass": "enemy",
															"sid": 927237746347571,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"idle\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "find us a random nearby location\nTODO: minimum distance so they don't walk 1 pixel away"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "enemy",
															"sid": 324552427916898,
															"parameters": {
																"instance-variable": "idleX",
																"value": "Self.X + random(Self.Width * -2, Self.Width * 2)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "enemy",
															"sid": 230193290243816,
															"parameters": {
																"instance-variable": "idleY",
																"value": "Self.Y + random(Self.Width * -2, Self.Width * 2)"
															}
														}
													],
													"sid": 307613189276596,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "has-los-to-position",
																	"objectClass": "enemy",
																	"sid": 236771090835255,
																	"behaviorType": "LineOfSight",
																	"parameters": {
																		"x": "Self.idleX",
																		"y": "Self.idleY"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "walk there, provided it's not in or behind a solid"
																},
																{
																	"id": "move-to-position",
																	"objectClass": "enemy",
																	"sid": 230452867465346,
																	"behaviorType": "MoveTo",
																	"parameters": {
																		"x": "Self.idleX",
																		"y": "Self.idleY",
																		"mode": "direct"
																	}
																}
															],
															"sid": 714303469510522
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-moving",
															"objectClass": "enemy",
															"sid": 755610657772002,
															"behaviorType": "MoveTo",
															"isInverted": true
														},
														{
															"id": "pick-children",
															"objectClass": "enemy",
															"sid": 403904369455565,
															"parameters": {
																"child": "enemyBody",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "enemyBody",
															"sid": 664673107718234,
															"parameters": {
																"animation": "\"idle\" & enemy.degrees",
																"from": "beginning"
															}
														}
													],
													"sid": 458070132214565
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "on-collision-with-another-object",
															"objectClass": "enemy",
															"sid": 458016562815922,
															"parameters": {
																"object": "enemy"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "this can't be nested under \"is moving\", also we need the \"push out\" or else the enemy can just walk into the enemy next tick/idle move"
														},
														{
															"id": "stop",
															"objectClass": "enemy",
															"sid": 738864065899912,
															"behaviorType": "MoveTo"
														},
														{
															"id": "push-out-solid",
															"objectClass": "enemy",
															"sid": 123485606783872,
															"behaviorType": "Custom",
															"parameters": {
																"direction": "nearest"
															}
														}
													],
													"sid": 283697356536894
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 823044371251818,
													"parameters": {
														"instance-variable": "degrees",
														"comparison": 0,
														"value": "-180"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 136125450471028,
													"parameters": {
														"instance-variable": "degrees",
														"value": "180"
													}
												}
											],
											"sid": 518082064263967
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 772293206868645,
													"parameters": {
														"object": "player"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "enemies have to be immediately pushed totally out of the player, otherwise the player will lose control"
												},
												{
													"id": "push-out-solid",
													"objectClass": "enemy",
													"sid": 132267025928884,
													"behaviorType": "Custom",
													"parameters": {
														"direction": "nearest"
													}
												}
											],
											"sid": 865565703473101
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 341363874499595,
													"parameters": {
														"object": "prop"
													}
												}
											],
											"actions": [
												{
													"id": "stop",
													"objectClass": "enemy",
													"sid": 645235863408135,
													"behaviorType": "MoveTo"
												},
												{
													"id": "push-out-solid",
													"objectClass": "enemy",
													"sid": 654301679819236,
													"behaviorType": "Custom",
													"parameters": {
														"direction": "nearest"
													}
												}
											],
											"sid": 302283878491009
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 502432870761598,
											"parameters": {
												"instance-variable": "alive"
											},
											"isInverted": true
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 427754215939626,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 426232864811279,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 0,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "pick enemies that are dead, and their bodies that aren't playing the dying animation. Immediately stop their movement and disabled solids, and play the die animation"
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 546111680955229,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 393361864088470,
											"parameters": {
												"animation": "\"die\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "enemy",
											"sid": 656639758391853,
											"behaviorType": "Solid",
											"parameters": {
												"state": "disabled"
											}
										}
									],
									"sid": 527839902763390
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 972273153363701,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "compare-animation-frame",
											"objectClass": "enemyBody",
											"sid": 758084776997002,
											"parameters": {
												"comparison": 0,
												"number": "Self.AnimationFrameCount - 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "we couldn't get the \"fade\" behavior to work, most likely because all our enemyBodies are created during runtime"
										},
										{
											"type": "comment",
											"text": "if we're on the last frame of a die animation, reduce the opacity by 1 (every tick)"
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyBody",
											"sid": 391061470180340,
											"parameters": {
												"opacity": "Self.Opacity - 1"
											}
										}
									],
									"sid": 499287131642308,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-speed",
													"objectClass": "enemyBody",
													"sid": 490505613222492,
													"parameters": {
														"comparison": 1,
														"number": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "stop the die animation (on the last frame) if we haven't already)"
												},
												{
													"id": "stop-animation",
													"objectClass": "enemyBody",
													"sid": 568088771165848
												}
											],
											"sid": 605826166563561
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-opacity",
													"objectClass": "enemyBody",
													"sid": 642136191668874,
													"parameters": {
														"comparison": 0,
														"opacity": "0"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "enemyBody",
													"sid": 907376296625699,
													"parameters": {
														"parent": "enemy",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "destroy dead enemies that are fully opaque. also destroys the enemyBody because they're parented"
												},
												{
													"id": "destroy",
													"objectClass": "enemy",
													"sid": 296899673207850
												}
											],
											"sid": 866043211158292
										}
									]
								}
							]
						}
					],
					"sid": 655670423454118
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-children",
							"objectClass": "enemyBody",
							"sid": 180055808204342,
							"parameters": {
								"child": "shadow",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "shadow",
							"sid": 981678705682808,
							"parameters": {
								"animation": "enemyBody.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "shadow",
							"sid": 814796704126411,
							"parameters": {
								"frame-number": "enemyBody.AnimationFrame"
							}
						}
					],
					"sid": 999235579307264
				}
			],
			"sid": 698161644159610
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "environment",
			"description": "doors, transparencies",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "transparents",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 841859110081763,
									"parameters": {
										"interval-seconds": ".5"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "don't check for transparency overlaps every tick. also since the player shape changes minutely during animations don't wig out if we're very close to a transparent"
								}
							],
							"sid": 972384705783051,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "body",
											"sid": 501636393154527,
											"parameters": {
												"object": "transparent"
											}
										}
									],
									"actions": [
										{
											"id": "set-opacity",
											"objectClass": "transparent",
											"sid": 324999490389541,
											"parameters": {
												"opacity": "50"
											}
										}
									],
									"sid": 777441593434605
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 763324500605559
										}
									],
									"actions": [
										{
											"id": "set-opacity",
											"objectClass": "transparent",
											"sid": 631500974105583,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 145335266554931
								}
							]
						}
					],
					"sid": 373915111829325
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "doors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "even though the doors only have 1 animation, we still have to \"set\" it to get it to work right. (Play and Stop don't work)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 471386938140253,
									"parameters": {
										"object": "door"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "door",
									"sid": 236761484553217,
									"parameters": {
										"animation": "\"Default\"",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-speed",
									"objectClass": "door",
									"sid": 215728374211450,
									"parameters": {
										"speed": "10"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "door",
									"sid": 244672807827438,
									"parameters": {
										"effect": "\"Brightness\"",
										"parameter-index": "0",
										"value": "110"
									}
								}
							],
							"sid": 558214191320744
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 757653240898616
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "door",
									"sid": 836635031431721,
									"parameters": {
										"animation": "\"Default\"",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-speed",
									"objectClass": "door",
									"sid": 844351404631993,
									"parameters": {
										"speed": "-10"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "door",
									"sid": 889843962590487,
									"parameters": {
										"effect": "\"Brightness\"",
										"parameter-index": "0",
										"value": "100"
									}
								}
							],
							"sid": 843689254304856
						}
					],
					"sid": 662460923767139
				}
			],
			"sid": 934700656770935
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "projectiles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "projectile",
							"sid": 102155895555820
						}
					],
					"actions": [],
					"sid": 281740100757419,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-distance-travelled",
									"objectClass": "projectile",
									"sid": 690372059569654,
									"behaviorType": "Bullet",
									"parameters": {
										"comparison": 4,
										"distance": "Self.range"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "projectile",
									"sid": 209986663550304
								}
							],
							"sid": 624142955067780
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 665746992319558,
									"parameters": {
										"object": "enemy"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "projectile",
									"sid": 899911050089323,
									"parameters": {
										"instance-variable": "friendly"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 126998262469066,
									"parameters": {
										"instance-variable": "health",
										"value": "projectile.slashDamage * (1 - Self.slashResistance)"
									}
								}
							],
							"sid": 507781964889351
						}
					]
				}
			],
			"sid": 743286072874223
		}
	],
	"sid": 318845921999986
}